/*!
  * Stickyfill – `position: sticky` polyfill
  * v. 2.1.0 | https://github.com/wilddeer/stickyfill
  * MIT License
  */
function search(n){n!=""&&(location.href="/search/hysearchws.aspx?q="+encodeURI(n))}function replaceVideoUrls(n){var t,i=n.attr("href").split("/"),r;i[2]==="cnavideo.cna.com.tw"&&(r=i[i.length-1].split(".aspx?v="),r.length===2&&(t=r[0]));t!==undefined&&n.attr("href","https://www.cna.com.tw/news/video/"+t+".aspx")}function addiPadSmartBanner(){var u=navigator.userAgent.match(/(iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,t,i,r,n;u&&!IS_IN_APP&&(t="app-id=444438688",i=document.querySelectorAll("link[rel='canonical']")[0],i!=undefined&&(r=i.getAttribute("href"),t+=", app-argument="+r),n=document.createElement("meta"),n.name="apple-itunes-app",n.content=t,document.getElementsByTagName("head")[0].appendChild(n))}function callAPI(n,t){$.ajax({url:n,type:"GET",data:null,async:!1,contentType:"application/json",dataType:"json",success:function(n,i){i==="success"?t(n):t(null)},error:function(){t(null)}})}function postAPI(n,t,i){$.ajax({url:"/cna2018api/api/"+n,type:"POST",data:JSON.stringify(t),async:!1,contentType:"application/json",dataType:"json",success:function(n,t){t==="success"?i(n):i(null)},error:function(){i(null)}})}function setCookie(n,t,i,r){var f=new Date,u;f.setTime(f.getTime()+i*6e4);u=n+"="+escape(t)+"; expires="+f.toGMTString()+";";r!==""&&(u+="domain="+r+";");u+="path=/;SameSite=None;Secure";document.cookie=u}function getCookie(n){var u=null,i,t,r;if(document.cookie.length>0)for(i=document.cookie.split(";"),t=0;t<i.length;t++)if(r=i[t].split("="),jQuery.trim(r[0])===n){u=r[1];break}return u}var isIE,userAgent,expireMinuts,cnaCrossAd;(function(n,t){"use strict";function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function u(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}function f(n){return parseFloat(n)||0}function l(n){for(var t=0;n;)t+=n.offsetTop,n=n.offsetParent;return t}function a(){function h(){n.pageXOffset!=r.left?(r.top=n.pageYOffset,r.left=n.pageXOffset,e.refreshAll()):n.pageYOffset!=r.top&&(r.top=n.pageYOffset,r.left=n.pageXOffset,i.forEach(function(n){return n._recalcPosition()}))}function s(){o=setInterval(function(){i.forEach(function(n){return n._fastCheck()})},500)}function l(){clearInterval(o)}var o,u,f;c||(c=!0,h(),n.addEventListener("scroll",h),n.addEventListener("resize",e.refreshAll),n.addEventListener("orientationchange",e.refreshAll),o=void 0,u=void 0,f=void 0,"hidden"in t?(u="hidden",f="visibilitychange"):"webkitHidden"in t&&(u="webkitHidden",f="webkitvisibilitychange"),f?(t[u]||s(),t.addEventListener(f,function(){t[u]?l():s()})):s())}var v=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=!1,h=typeof n!="undefined",s,e;h&&n.getComputedStyle?function(){var n=t.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(t){try{n.style.position=t+"sticky"}catch(i){}return n.style.position!=""})&&(o=!0)}():o=!0;var c=!1,p=typeof ShadowRoot!="undefined",r={top:null,left:null},i=[];s=function(){function e(n){if(y(this,e),!(n instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(i.some(function(t){return t._node===n}))throw new Error("Stickyfill is already applied to this node");this._node=n;this._stickyMode=null;this._active=!1;i.push(this);this.refresh()}return v(e,[{key:"refresh",value:function(){var k,w,b,c;if(!o&&!this._removed){this._active&&this._deactivate();var i=this._node,r=getComputedStyle(i),e={position:r.position,top:r.top,display:r.display,marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,cssFloat:r.cssFloat};if(!isNaN(parseFloat(e.top))&&e.display!="table-cell"&&e.display!="none"){this._active=!0;k=i.style.position;(r.position=="sticky"||r.position=="-webkit-sticky")&&(i.style.position="static");var v=i.parentNode,h=p&&v instanceof ShadowRoot?v.host:v,s=i.getBoundingClientRect(),y=h.getBoundingClientRect(),a=getComputedStyle(h);this._parent={node:h,styles:{position:h.style.position},offsetHeight:h.offsetHeight};this._offsetToWindow={left:s.left,right:t.documentElement.clientWidth-s.right};this._offsetToParent={top:s.top-y.top-f(a.borderTopWidth),left:s.left-y.left-f(a.borderLeftWidth),right:-s.right+y.right-f(a.borderRightWidth)};this._styles={position:k,top:i.style.top,bottom:i.style.bottom,left:i.style.left,right:i.style.right,width:i.style.width,marginTop:i.style.marginTop,marginLeft:i.style.marginLeft,marginRight:i.style.marginRight};w=f(e.top);this._limits={start:s.top+n.pageYOffset-w,end:y.top+n.pageYOffset+h.offsetHeight-f(a.borderBottomWidth)-i.offsetHeight-w-f(e.marginBottom)};b=a.position;b!="absolute"&&b!="relative"&&(h.style.position="relative");this._recalcPosition();c=this._clone={};c.node=t.createElement("div");u(c.node.style,{width:s.right-s.left+"px",height:s.bottom-s.top+"px",marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,cssFloat:e.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"});v.insertBefore(c.node,i);c.docOffsetTop=l(c.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var n=r.top<=this._limits.start?"start":r.top>=this._limits.end?"end":"middle";if(this._stickyMode!=n){switch(n){case"start":u(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":u(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":u(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=n}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(l(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var n=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,u(this._node.style,this._styles),delete this._styles,i.some(function(t){return t!==n&&t._parent&&t._parent.node===n._parent.node})||u(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var n=this;this._deactivate();i.some(function(t,r){if(t._node===n._node)return i.splice(r,1),!0});this._removed=!0}}]),e}();e={stickies:i,Sticky:s,forceSticky:function(){o=!1;a();this.refreshAll()},addOne:function(n){if(!(n instanceof HTMLElement))if(n.length&&n[0])n=n[0];else return;for(var t=0;t<i.length;t++)if(i[t]._node===n)return i[t];return new s(n)},add:function(n){var t,u,r,f;if(n instanceof HTMLElement&&(n=[n]),n.length){for(t=[],u=function(r){var u=n[r];if(!(u instanceof HTMLElement))return t.push(void 0),"continue";if(i.some(function(n){if(n._node===u)return t.push(n),!0}))return"continue";t.push(new s(u))},r=0;r<n.length;r++)f=u(r),f==="continue";return t}},refreshAll:function(){i.forEach(function(n){return n.refresh()})},removeOne:function(n){if(!(n instanceof HTMLElement))if(n.length&&n[0])n=n[0];else return;i.some(function(t){if(t._node===n)return t.remove(),!0})},remove:function(n){var r,t;if(n instanceof HTMLElement&&(n=[n]),n.length)for(r=function(t){var r=n[t];i.some(function(n){if(n._node===r)return n.remove(),!0})},t=0;t<n.length;t++)r(t)},removeAll:function(){while(i.length)i[0].remove()}};o||a();typeof module!="undefined"&&module.exports?module.exports=e:h&&(n.Stickyfill=e)})(window,document);isIE=function(){var n={};return function(t,i){var o=t?i?"is"+i+"IE"+t:"isIE"+t:"isIE",r=n[o],f,u,e,s;return typeof r!="undefined"?r:(t?(f=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:|Edge\/)(\d+)/),f?(u=parseInt(f[1]),r=i?i=="lt"?u<t:i=="gt"?u>t:undefined:u==t):t<=9?(e=document.createElement("b"),s="<!--[if "+(i?i:"")+" IE "+t+"]><i><\/i><![endif]-->",e.innerHTML=s,r=e.getElementsByTagName("i").length===1):r=undefined):r=navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0,n[o]=r,r)}}();isIE(11,"lt")==!0&&alert("您的瀏覽器版本不支援，請升級瀏覽器！");userAgent=navigator.userAgent;$(function(){function t(n,t){$(n).each(function(){$(this).text().length>t&&($(this).text($(this).text().substring(0,t)),$(this).html($(this).html()+"..."))})}isIE(11)==!0&&$("body").addClass("ImgForIE");userAgent.indexOf("Mac")>-1&&$("body").addClass("inMac");var n=window.innerWidth;n>1200&&n<1280?t(".subSite .ulist a",20):n<1024&&n>730?t(".subSite .ulist a",20):t(".subSite .ulist a",30);$(".seeListmore").each(function(){$(this).on("click",function(){var n=$(this).parent(".news-dic-main");n.hasClass("hidden")?(n.removeClass("hidden"),$(this).text("關閉")):(n.addClass("hidden"),$(this).text("看更多"))})});$(".seeArticlemore").each(function(){$(this).on("click",function(){var n=$(this).parent(".dictionary-box");n.removeClass("hidden");$(this).hide();$(this).next(".closeBox").show()})});$(".closeBox").each(function(){$(this).on("click",function(){var n=$(this).parent(".dictionary-box");n.removeClass("open");$(this).hide();$(this).prev(".seeArticlemore").show();$(".dic-overlay").remove()})});$(".news-dic-inline").each(function(){$(this).on("click",function(){var i=$(this).attr("data-id"),n=$(this).next(".dictionary-box"),t;n.hasClass("open")?n.removeClass("open"):window.innerWidth>=1024?(n.css("visibility","hidden"),n.removeClass("noHidden").removeClass("hidden").addClass("noHidden"),n.addClass("open"),t=n.find(".news-dic-text").first().height(),t<=280?(n.addClass("noHidden"),n.find(".seeArticlemore").hide(),n.find(".closeBox").hide(),n.addClass("jsClicked")):(n.addClass("hidden"),n.find(".seeArticlemore").show(),n.find(".closeBox").hide(),n.addClass("jsClicked")),n.css("visibility","visible")):n.addClass("open");$("body").append('<div class="dic-overlay"><a class="dic-close" href="javascript:"><\/a><\/div>');$(".dic-close").on("click",function(){$(".dictionary-box.open").removeClass("open");$(".dic-overlay").remove();$("body").removeClass("lockScroll")});$(".dic-overlay").on("click",function(){$(".dictionary-box.open").removeClass("open");$(".dic-overlay").remove();window.innerWidth<1024&&$("body").removeClass("lockScroll")});window.innerWidth<1024&&($("body").addClass("lockScroll"),n.addClass("hidden"))})})});$("#mySearch").on("click",function(){var n=$("input[class='darkerInput']").val();search(n)});$("input[class='darkerInput']").on("keydown",function(n){var i=n.keyCode||n.which,t;i==13&&(t=$(this).val(),search(t),n.preventDefault())});$(function(){function n(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)}n()&&$("a").attr("target","_self")});window.innerWidth<=1024&&$(".first-level[href*='http://cnavideo.cna.com.tw']").attr("href","https://www.cna.com.tw/list/video.aspx");addiPadSmartBanner();expireMinuts=60;cnaCrossAd=getCookie("CnaCrossAd");$(window).on("load",function(){if(window.innerWidth<1024&&IS_IN_APP==!1)if(cnaCrossAd==null)setCookie("CnaCrossAd",1,expireMinuts,"");else if(cnaCrossAd==1){loadGPT();setCookie("CnaCrossAd",2,expireMinuts,"");var n="undefined";googletag.cmd.push(function(){n=googletag.defineSlot("/137033094/cna2018_m_320x480_cross",[[320,480],[300,250]],"div-gpt-ad-1540795118095-0").addService(googletag.pubads());googletag.pubads().enableSingleRequest();googletag.pubads().collapseEmptyDivs();googletag.enableServices();googletag.pubads().addEventListener("slotRenderEnded",function(n){switch(n.slot.getSlotElementId()){case"div-gpt-ad-1540795118095-0":var t=!n.isEmpty;t||$.colorbox.close()}})});loadJsCssFile(STATIC_DOC_PATH+"/css/colorbox.min.css?v=20201007","css",function(){loadJsCssFile(STATIC_DOC_PATH+"/js/jquery.colorbox.min.js?v=20201007","js",function(){$.colorbox({html:"<div id='popupBox'><a class='closepopBox' href=''><i class='icon-cross'><\/i><\/a><div class='centerAdvertise'><div class='advertiseCode'><div id='div-gpt-ad-1540795118095-0'><\/div><\/div><\/div><\/div>",width:"100%",maxWidth:"100%",height:"100%",maxHeight:"100%",title:!1,closeButton:!1,opacity:.85,className:"indexCover",onOpen:function(){googletag.cmd.push(function(){googletag.display("div-gpt-ad-1540795118095-0");googletag.pubads().refresh([n])});$("#colorbox").addClass("popupOpen");$("body").addClass("lockScroll")},onClosed:function(){$("body").removeClass("lockScroll")}});$(document).bind("cbox_open",function(){$("body").css({overflow:"hidden"})}).bind("cbox_closed",function(){$("body").css({overflow:"auto"})});$("body").on("click",".closepopBox",function(){return $.colorbox.close(),!1})})})}});$(function(){function a(){h=$("header").height()+100;l=$("footer").height();e=$(".TopSection").height();n.removeClass("open");n.addClass("close");r.removeClass("open");t.removeClass("lockScroll");i.removeClass("open")}function v(){var t=navigator.userAgent,i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),r=t.includes("Safari"),n=!1;return i&&r===!1&&(n=!0),n}function y(){var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return n?!0:!1}function p(){$(".menuUrl").each(function(){var n=$(this),t=n.data("innersptag"),u=n.data("menutext"),i=w(t,u),r="";r=t?'<span class="innerSPtag">'+t+'／<\/span><span class="_ellipsis_newstopic">'+i+"<\/span>":'<span class="_ellipsis_default">'+i+"<\/span>";n.html(r)})}function w(n,t){var s,f,e,u,i,a;if(n?(s=n+t,f=n.length+t.length,e=1):(s=t,f=t.length,e=0),u=s.match(/[\u0000-\u00ff]/g),i="",u){var h=f-u.length,l=h*2,o=l+u.length,r;e>0?(r=c(n),i=o>56?t.substring(0,28-r)+"...":t):(r=0,a=u.length/2,i=o>56?t.substring(0,28+a)+"...":t)}else{var h=f,l=h*2,o=l,r;e>0?(r=c(n),i=o>56?t.substring(0,28-r)+"...":t):(r=0,i=o>58?t.substring(0,28)+"...":t)}return i}function c(n){var t,i=n.match(/[\u0000-\u00ff]/g),r,u;return i?(r=n.length-i.length,u=r*2,t=i.length+u+2):t=n.length*2+2,Math.round(t/2)}var t=$("body"),b=$(".darkerBlock"),n=$(".sideMenu"),i=$(".menu-toggle"),r=$(".darker"),o=document.querySelectorAll(".sticky"),f,u,h,l,e;if(Stickyfill.add(o),window.innerWidth>1024&&!y()){var k=$(".subBlock"),d=$(".menu"),g=$("header"),s=!1;$(".main-menu > li").mouseenter(function(){$(this).addClass("current");s||p();s=!0});$(".main-menu > li").mouseleave(function(){$(".main-menu > li").removeClass("current");$(".subBlock").removeClass("open")})}if(f=$(".sticky-over-scroll"),u=!0,$(".toRightSide").click(function(){u?(f.animate({left:0},300),u=!1):(f.animate({left:50},300),u=!0)}),a(),window.addEventListener("scroll",function(){var n=window.scrollY||window.pageYOffset;n>e?$("body").addClass("fixedMenu"):$("body").removeClass("fixedMenu");n>e&&Stickyfill.add(o);window.innerWidth>1024?n>2200&&$(".index .latesNews").addClass("showMore"):n>=h?$("body").addClass("scrolling"):$("body").removeClass("scrolling")}),window.innerWidth<=1024){$("body").on("click",".menu-toggle",function(){var u=$(".TopSection").height();i.hasClass("open")?(n.removeClass("open"),n.addClass("close"),r.removeClass("open"),t.removeClass("lockScroll"),i.removeClass("open")):(n.addClass("open"),n.removeClass("close"),r.addClass("open"),t.addClass("lockScroll"),i.addClass("open"),n.css("top",u))});$("body").on("click touchstart touchmove touchend",".darker",function(){n.removeClass("open");n.addClass("close");r.removeClass("open");t.removeClass("lockScroll");i.removeClass("open")});v()?$(".page").length&&(document.querySelector(".page").classList.add("backpageStatus"),$(".backpage").click(function(){document.referrer.length==0?document.location.href="https://www.cna.com.tw":document.referrer.indexOf("cna.com.tw")>-1&&document.referrer.indexOf("facebook.com")>-1?history.go(-3):document.referrer.indexOf("cna.com.tw")>-1?history.go(-1):document.location.href="https://www.cna.com.tw"})):document.querySelector(".page")!==null&&document.querySelector(".page").classList.remove("backpageStatus")}$(".searchBtn").click(function(){t.find(".darkerBlock").addClass("open");t.addClass("lockScroll");$(".darkerInput").focus()});$(document).on("mouseup touchend",function(n){var i=$(".searchCon");i.is(n.target)||i.has(n.target).length!==0||(t.find(".darkerBlock").removeClass("open"),t.removeClass("lockScroll"),$(".darkerInput").blur())});$(".earthBtn").click(function(){var n=$(".language"),t=$(".langroup");n.hasClass("open")?(n.removeClass("open"),t.fadeOut(300)):(n.addClass("open"),t.fadeIn(300));$(document).mouseup(function(i){var r=$(".langroup");r.is(i.target)||r.has(i.target).length!==0||(n.removeClass("open"),t.fadeOut(300))})})});
/*! lazysizes - v4.0.3 */
!function(n,t){var i=t(n,n.document);n.lazySizes=i;"object"==typeof module&&module.exports&&(module.exports=i)}(window,function(n,t){"use strict";if(t.getElementsByClassName){var h,i,f=t.documentElement,e=n.Date,et=n.HTMLPictureElement,o="addEventListener",r="getAttribute",s=n[o],u=n.setTimeout,ot=n.requestAnimationFrame||u,d=n.requestIdleCallback,it=/^picture$/i,st=["load","error","lazyincluded","_lazyloaded"],p={},ht=Array.prototype.forEach,c=function(n,t){return p[t]||(p[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),p[t].test(n[r]("class")||"")&&p[t]},w=function(n,t){c(n,t)||n.setAttribute("class",(n[r]("class")||"").trim()+" "+t)},g=function(n,t){var i;(i=c(n,t))&&n.setAttribute("class",(n[r]("class")||"").replace(i," "))},l=function(n,t,i){var r=i?o:"removeEventListener";i&&l(n,t);st.forEach(function(i){n[r](i,t)})},a=function(n,i,r,u,f){var e=t.createEvent("CustomEvent");return r||(r={}),r.instance=h,e.initCustomEvent(i,!u,!f,r),n.dispatchEvent(e),e},nt=function(t,r){var u;!et&&(u=n.picturefill||i.pf)?u({reevaluate:!0,elements:[t]}):r&&r.src&&(t.src=r.src)},v=function(n,t){return(getComputedStyle(n,null)||{})[t]},rt=function(n,t,r){for(r=r||n.offsetWidth;r<i.minSize&&t&&!n._lazysizesWidth;)r=t.offsetWidth,t=t.parentNode;return r},y=function(){var n,i,r=[],s=[],f=r,e=function(){var t=f;for(f=r.length?s:r,n=!0,i=!1;t.length;)t.shift()();n=!1},o=function(r,o){n&&!o?r.apply(this,arguments):(f.push(r),i||(i=!0,(t.hidden?u:ot)(e)))};return o._lsFlush=e,o}(),b=function(n,t){return t?function(){y(n)}:function(){var t=this,i=arguments;y(function(){n.apply(t,i)})}},ct=function(n){var r,f=0,h=i.throttleDelay,t=i.ricTimeout,o=function(){r=!1;f=e.now();n()},s=d&&t>49?function(){d(o,{timeout:t});t!==i.ricTimeout&&(t=i.ricTimeout)}:b(function(){u(o)},!0);return function(n){var i;(n=n===!0)&&(t=33);r||(r=!0,i=h-(e.now()-f),0>i&&(i=0),n||9>i?s():u(s,i))}},ut=function(n){var t,r,i=99,f=function(){t=null;n()},o=function(){var n=e.now()-r;i>n?u(o,i-n):(d||f)(f)};return function(){r=e.now();t||(t=u(o,i))}};!function(){var t,r={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};i=n.lazySizesConfig||n.lazysizesConfig||{};for(t in r)t in i||(i[t]=r[t]);n.lazySizesConfig=i;u(function(){i.init&&k()})}();var ft=function(){var at,rt,gt,ft,ni,ti,ii,et,ot,st,lt,kt,vt,dt,ei=/^img$/i,oi=/^iframe$/i,si="onscroll"in n&&!/glebot/.test(navigator.userAgent),hi=0,yt=0,k=0,d=-1,pt=function(n){k--;n&&n.target&&l(n.target,pt);(!n||0>k||!n.target)&&(k=0)},ci=function(n,i){var u,r=n,e="hidden"==v(t.body,"visibility")||"hidden"!=v(n,"visibility");for(et-=i,lt+=i,ot-=i,st+=i;e&&(r=r.offsetParent)&&r!=t.body&&r!=f;)e=(v(r,"opacity")||1)>0,e&&"visible"!=v(r,"overflow")&&(u=r.getBoundingClientRect(),e=st>u.left&&ot<u.right&&lt>u.top-1&&et<u.bottom+1);return e},ri=function(){var y,n,o,s,l,e,a,c,p,u=h.elements;if((ft=i.loadMode)&&8>k&&(y=u.length)){for(n=0,d++,null==vt&&(("expand"in i)||(i.expand=f.clientHeight>500&&f.clientWidth>500?500:370),kt=i.expand,vt=kt*i.expFactor),vt>yt&&1>k&&d>2&&ft>2&&!t.hidden?(yt=vt,d=0):yt=ft>1&&d>1&&6>k?kt:hi;y>n;n++)if(u[n]&&!u[n]._lazyRace)if(si)if((c=u[n][r]("data-expand"))&&(e=1*c)||(e=yt),p!==e&&(ti=innerWidth+e*dt,ii=innerHeight+e,a=-1*e,p=e),o=u[n].getBoundingClientRect(),(lt=o.bottom)>=a&&(et=o.top)<=ii&&(st=o.right)>=a*dt&&(ot=o.left)<=ti&&(lt||st||ot||et)&&(i.loadHidden||"hidden"!=v(u[n],"visibility"))&&(rt&&3>k&&!c&&(3>ft||4>d)||ci(u[n],e))){if(wt(u[n]),l=!0,k>9)break}else!l&&rt&&!s&&4>k&&4>d&&ft>2&&(at[0]||i.preloadAfterLoad)&&(at[0]||!c&&(lt||st||ot||et||"auto"!=u[n][r](i.sizesAttr)))&&(s=at[0]||u[n]);else wt(u[n]);s&&!l&&wt(s)}},p=ct(ri),ui=function(n){w(n.target,i.loadedClass);g(n.target,i.loadingClass);l(n.target,fi);a(n.target,"lazyloaded")},li=b(ui),fi=function(n){li({target:n.target})},ai=function(n,t){try{n.contentWindow.location.replace(t)}catch(i){n.src=t}},vi=function(n){var t,u=n[r](i.srcsetAttr);(t=i.customMedia[n[r]("data-media")||n[r]("media")])&&n.setAttribute("media",t);u&&n.setAttribute("srcset",u)},yi=b(function(n,t,f,e,o){var s,h,v,c,p,b;(p=a(n,"lazybeforeunveil",t)).defaultPrevented||(e&&(f?w(n,i.autosizesClass):n.setAttribute("sizes",e)),h=n[r](i.srcsetAttr),s=n[r](i.srcAttr),o&&(v=n.parentNode,c=v&&it.test(v.nodeName||"")),b=t.firesLoad||"src"in n&&(h||s||c),p={target:n},b&&(l(n,pt,!0),clearTimeout(gt),gt=u(pt,2500),w(n,i.loadingClass),l(n,fi,!0)),c&&ht.call(v.getElementsByTagName("source"),vi),h?n.setAttribute("srcset",h):s&&!c&&(oi.test(n.nodeName)?ai(n,s):n.src=s),o&&(h||c)&&nt(n,{src:s}));n._lazyRace&&delete n._lazyRace;g(n,i.lazyClass);y(function(){(!b||n.complete&&n.naturalWidth>1)&&(b?pt(p):k--,ui(p))},!0)}),wt=function(n){var f,t=ei.test(n.nodeName),e=t&&(n[r](i.sizesAttr)||n[r]("sizes")),u="auto"==e;(u||!rt)&&t&&(n[r]("src")||n.srcset)&&!n.complete&&!c(n,i.errorClass)&&c(n,i.lazyClass)||(f=a(n,"lazyunveilread").detail,u&&tt.updateElem(n,!0,n.offsetWidth),n._lazyRace=!0,k++,yi(n,f,u,e,t))},bt=function(){if(!rt){if(e.now()-ni<999)return void u(bt,999);var n=ut(function(){i.loadMode=3;p()});rt=!0;i.loadMode=3;p();s("scroll",function(){3==i.loadMode&&(i.loadMode=2);n()},!0)}};return{_:function(){ni=e.now();h.elements=t.getElementsByClassName(i.lazyClass);at=t.getElementsByClassName(i.lazyClass+" "+i.preloadClass);dt=i.hFac;s("scroll",p,!0);s("resize",p,!0);n.MutationObserver?new MutationObserver(p).observe(f,{childList:!0,subtree:!0,attributes:!0}):(f[o]("DOMNodeInserted",p,!0),f[o]("DOMAttrModified",p,!0),setInterval(p,999));s("hashchange",p,!0);["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(n){t[o](n,p,!0)});/d$|^c/.test(t.readyState)?bt():(s("load",bt),t[o]("DOMContentLoaded",p),u(bt,2e4));h.elements.length?(ri(),y._lsFlush()):p()},checkElems:p,unveil:wt}}(),tt=function(){var n,f=b(function(n,t,i,r){var f,u,e;if(n._lazysizesWidth=r,r+="px",n.setAttribute("sizes",r),it.test(t.nodeName||""))for(f=t.getElementsByTagName("source"),u=0,e=f.length;e>u;u++)f[u].setAttribute("sizes",r);i.detail.dataAttr||nt(n,i.detail)}),r=function(n,t,i){var r,u=n.parentNode;u&&(i=rt(n,u,i),r=a(n,"lazybeforesizes",{width:i,dataAttr:!!t}),r.defaultPrevented||(i=r.detail.width,i&&i!==n._lazysizesWidth&&f(n,u,r,i)))},e=function(){var t,i=n.length;if(i)for(t=0;i>t;t++)r(n[t])},u=ut(e);return{_:function(){n=t.getElementsByClassName(i.autosizesClass);s("resize",u)},checkElems:u,updateElem:r}}(),k=function(){k.i||(k.i=!0,tt._(),ft._())};return h={cfg:i,autoSizer:tt,loader:ft,init:k,uP:nt,aC:w,rC:g,hC:c,fire:a,gW:rt,rAF:y}}});